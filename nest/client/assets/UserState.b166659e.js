import{f as s,m as a,l as i,u as e,g as t}from"./index.b73d235c.js";import{a as r}from"./Services.3fb9b37a.js";const o=s({email:"",password:"",authSuccess:!1,isProgressing:!1,profil:{uid:"",name:"",email:"",password:"",created:0,updated:0}});function n(){return{UserState:o,startAuthGoogle:function(){o.isProgressing=!0;const s=(new a.auth.GoogleAuthProvider).addScope("https://www.googleapis.com/auth/user.gender.read");i.signInWithRedirect(s)},startLoginBasic:async function(){o.isProgressing=!0;const s=e(),{success:a,data:i}=await r.login(JSON.stringify({email:o.email,password:o.password}));o.isProgressing=!1,o.authSuccess=a,a&&s.push({path:"/main/dashboard"})},getResultFromRedirect:async function(){o.isProgressing=!0;const s=e(),{user:a,additionalUserInfo:t}=await i.getRedirectResult();if(o.isProgressing=!1,a)if(null==t?void 0:t.isNewUser){const{success:i,data:e}=await r.register(JSON.stringify({email:a.email,name:a.displayName,gender:"laki-laki",uid:a.uid,password:a.uid}));o.authSuccess=i,i&&s.push({path:"/main/dashboard"})}else{const{success:i,data:e}=await r.login(JSON.stringify({email:a.email,password:a.uid}));o.authSuccess=i,i&&s.push({path:"/main/dashboard"})}else o.authSuccess=!1},getProfil:function(){t().then((async s=>{const{success:a,data:i}=await r.get({path:"/api/user/order/"+s.uid});a&&i&&(o.profil=i.data[0])}))}}}export{n as u};
